(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41f8a47e"],{"230c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article_container"},[n("van-nav-bar",{staticClass:"topbar-container",attrs:{title:"文章详情"}},[n("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:function(e){return t.$router.push({name:"Home",params:{active:t.active}})}},slot:"left"}),n("van-icon",{attrs:{slot:"right",name:"ellipsis",size:"24"},slot:"right"})],1),n("van-list",{staticClass:"article_body"},[n("h2",{staticClass:"title"},[t._v(t._s(t.articleInfo.title))]),n("van-cell",{staticClass:"article_author",attrs:{border:!1,center:""}},[n("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.articleInfo.aut_photo},slot:"icon"}),n("div",{staticClass:"author_name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.articleInfo.aut_name))]),n("div",{staticClass:"article_time",attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("formatTime")(t.articleInfo.pubdate))+" ")]),n("van-button",{staticClass:"follow_btn",attrs:{size:"small",round:"",icon:t.articleInfo.is_followed?"":"plus",type:"info",loading:t.isLoading},on:{click:t.followUser}},[t._v(t._s(t.articleInfo.is_followed?"取消关注":"关注"))])],1),n("div",{ref:"article_content",staticClass:"markdown-body",domProps:{innerHTML:t._s(t.articleInfo.content)}}),n("p",{staticClass:"article_end"},[t._v(" - - - - - - - - - - - - - - 正文结束 - - - - - - - - - - - - - - ")]),n("comment-list",{attrs:{title:" 全部评论",source:t.articleId,list:t.commentList},on:{onReplay:t.replayClick},model:{value:t.totalComments,callback:function(e){t.totalComments=e},expression:"totalComments"}})],1),n("div",{staticClass:"article_btm"},[n("van-button",{staticClass:"comment_btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.isWriteShow=!0}}},[t._v("写评论")]),n("van-icon",{attrs:{name:"comment-o",badge:t.totalComments}}),n("van-icon",{attrs:{name:t.articleInfo.is_collected?"star":"star-o",color:t.articleInfo.is_collected?"orange":"#777"},on:{click:t.onCollect}}),n("van-icon",{attrs:{name:1==t.articleInfo.attitude?"good-job":"good-job-o",color:1==t.articleInfo.attitude?"red":"#777"},on:{click:t.onLiking}}),n("van-icon",{attrs:{name:"share"}})],1),n("van-popup",{staticClass:"write_place",attrs:{position:"bottom"},model:{value:t.isWriteShow,callback:function(e){t.isWriteShow=e},expression:"isWriteShow"}},[n("comment-post",{attrs:{target:t.articleId},on:{postSuccess:t.onPostSuccess}})],1),n("van-popup",{staticClass:"write_place",attrs:{position:"bottom"},model:{value:t.isReplayComment,callback:function(e){t.isReplayComment=e},expression:"isReplayComment"}},[t.isReplayComment?n("replay-comment",{attrs:{articleId:t.articleId,comment:t.replayComment},on:{close:function(e){t.isReplayComment=!1}}}):t._e()],1)],1)},r=[],c=n("1da1"),o=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("4160"),n("159b"),n("e085"),n("3191")),i=n("28a2"),s=n("5d2d"),l=n("2423"),u={name:"ArticleInfo",components:{CommentList:function(){return n.e("chunk-77ad594a").then(n.bind(null,"a2cd"))},CommentPost:function(){return n.e("chunk-7ae03dda").then(n.bind(null,"7b27"))},ReplayComment:function(){return n.e("chunk-0d483737").then(n.bind(null,"cd6b"))}},props:{articleId:{type:[String,Number,Object],required:!0}},data:function(){return{active:Object(s["a"])("active"),totalComments:0,articleInfo:{},isLoading:!1,isWriteShow:!1,isReplayComment:!1,commentList:[],replayComment:{}}},methods:{loadArticle:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o["f"])(t.articleId);case 3:n=e.sent,a=n.data,t.articleInfo=a.data,t.$nextTick((function(){t.handleImg()})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleImg:function(){var t=this.$refs.article_content,e=t.querySelectorAll("img"),n=[];e.forEach((function(t,e){n.push(t.src),t.addEventListener("click",(function(){Object(i["a"])({images:n,closeable:!0,startPosition:e,showIndicators:!0})}))}))},followUser:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,n=t.articleInfo.aut_id,e.prev=2,!t.articleInfo.is_followed){e.next=9;break}return e.next=6,Object(o["a"])(n);case 6:e.sent,e.next=12;break;case 9:return e.next=11,Object(o["d"])(n);case 11:e.sent;case 12:t.articleInfo.is_followed=!t.articleInfo.is_followed,t.isLoading=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))()},onCollect:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.articleInfo.is_collected){e.next=6;break}return e.next=4,Object(l["d"])(t.articleId);case 4:e.next=8;break;case 6:return e.next=8,Object(l["a"])(t.articleId);case 8:t.$toast.success({message:t.articleInfo.is_collected?"已取消收藏":"收藏成功",forbidClick:!0}),t.articleInfo.is_collected=!t.articleInfo.is_collected,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},onLiking:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,1!=t.articleInfo.attitude){e.next=7;break}return e.next=4,Object(l["f"])(t.articleId);case 4:t.articleInfo.attitude=-1,e.next=10;break;case 7:return e.next=9,Object(l["c"])(t.articleId);case 9:t.articleInfo.attitude=1;case 10:t.$toast.success({message:1==t.articleInfo.attitude?"已点赞":"已取消点赞",forbidClick:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},onPostSuccess:function(t){this.totalComments+=1,this.commentList.unshift(t),this.isWriteShow=!1},replayClick:function(t){this.replayComment=t,this.isReplayComment=!0}},created:function(){this.loadArticle()},activated:function(){}},f=u,d=(n("fb44"),n("2877")),p=Object(d["a"])(f,a,r,!1,null,"2fefa696",null);e["default"]=p.exports},2423:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"h",(function(){return f}));var a=n("365c"),r=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/article/collections",data:{target:t}})},c=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/collections/".concat(t)})},o=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/article/likings",data:{target:t}})},i=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/likings/".concat(t)})},s=function(t){return Object(a["a"])({url:"/app/v1_0/comments",params:t})},l=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/comment/likings/".concat(t)})},u=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/comment/likings",data:{target:t}})},f=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/comments",data:t})}},3191:function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return f}));var a=n("365c"),r=function(){return Object(a["a"])({url:"/app/v1_0/user/channels"})},c=function(t){return Object(a["a"])({url:"/app/v1_1/articles",params:t})},o=function(){return Object(a["a"])({url:"/app/v1_0/channels"})},i=function(t){return Object(a["a"])({method:"patch",url:"/app/v1_0/user/channels",data:t})},s=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/user/channels/".concat(t)})},l=function(t){return Object(a["a"])({url:"/app/v1_0/articles/".concat(t)})},u=function(t){return Object(a["a"])({method:"post",url:"/app/v1_0/user/followings",data:{target:t}})},f=function(t){return Object(a["a"])({method:"delete",url:"/app/v1_0/user/followings/".concat(t)})}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),c="["+r+"]",o=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),s=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var c,o;return r&&"function"==typeof(c=e.constructor)&&c!==n&&a(o=c.prototype)&&o!==n.prototype&&r(t,o),t}},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),c=n("94ca"),o=n("6eeb"),i=n("5135"),s=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),d=n("7c73"),p=n("241c").f,m=n("06cf").f,b=n("9bf2").f,v=n("58a8").trim,h="Number",_=r[h],g=_.prototype,I=s(d(g))==h,C=function(t){var e,n,a,r,c,o,i,s,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(c=l.slice(2),o=c.length,i=0;i<o;i++)if(s=c.charCodeAt(i),s<48||s>r)return NaN;return parseInt(c,a)}return+l};if(c(h,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var k,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(I?f((function(){g.valueOf.call(n)})):s(n)!=h)?l(new _(C(e)),n,w):C(e)},O=a?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j=0;O.length>j;j++)i(_,k=O[j])&&!i(w,k)&&b(w,k,m(_,k));w.prototype=g,g.constructor=w,o(r,h,w)}},b50d4:function(t,e,n){},e085:function(t,e,n){},fb44:function(t,e,n){"use strict";n("b50d4")}}]);
//# sourceMappingURL=chunk-41f8a47e.e521587b.js.map